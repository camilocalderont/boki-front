<div class="bg-white rounded-2xl shadow-sm border border-gray-200">
  
  <!-- Campo de búsqueda -->
  <div class="p-4 border-b flex justify-end items-center">
    <input type="text"
           [(ngModel)]="searchTerm"
           (ngModelChange)="applyFilter()"
           placeholder="Buscar..."
           class="w-full sm:w-1/4 px-3 py-2 border rounded-lg text-sm focus:ring focus:ring-blue-200" />
  </div>
  
  <!-- Tabla -->
  <div class="overflow-x-auto">
    <table class="min-w-full text-sm text-left text-gray-600">
      <!-- Header -->
      <thead class="bg-gray-50 text-gray-700 uppercase text-xs">
        <tr>
          <th *ngFor="let col of columns"
              [style.width]="col.width"
              class="px-4 py-3 font-semibold tracking-wide">
            {{ col.label }}
          </th>
          <th class="px-4 py-3 text-right">Acciones</th>
        </tr>
      </thead>

      <!-- Body -->
      <tbody>
        <tr *ngFor="let row of paginatedData; let i = index"
            class="border-t hover:bg-gray-50 transition">
          <td *ngFor="let col of columns" class="px-4 py-3">
                {{ col.format ? (row[col.key] | date: col.format) : row[col.key] | truncateText:200 }}
          </td>
          <td class="px-4 py-3 text-right">
            <button (click)="onUpdate(row.Id)" 
                    class="inline-flex items-center px-2.5 py-2.5 bg-brand-blue text-white text-sm font-semibold rounded-xl hover:bg-brand-blue-dark focus:ring-4 focus:ring-blue-200 transition-all duration-200 shadow-sm hover:shadow-md">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Paginación -->
  <div class="flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t text-sm text-gray-700">
    
    <!-- Selector de tamaño -->
    <div class="flex items-center gap-2">
      <label for="pageSize" class="text-gray-600">Mostrar</label>
      <select id="pageSize"
              [(ngModel)]="pageSize"
              (ngModelChange)="changePageSize($event)"
              class="px-2 py-1 border rounded-lg text-sm focus:ring focus:ring-blue-200">
        <option *ngFor="let size of pageSizeOptions" [ngValue]="size">
          {{ size }}
        </option>
      </select>
      <span>filas</span>
    </div>

    <!-- Navegación -->
    <div class="flex items-center gap-1">
      <button (click)="changePage(currentPage - 1)"
              [disabled]="currentPage === 1"
              class="px-3 py-1 rounded-lg border bg-gray-100 hover:bg-gray-200 disabled:opacity-50">
        Prev
      </button>

      <ng-container *ngFor="let p of pages">
        <button (click)="changePage(p)"
                class="inline-flex items-center px-3 py-1 bg-brand-blue text-dark rounded-xl hover:bg-brand-blue-dark focus:ring-4 focus:ring-blue-200 transition-all duration-200 shadow-sm hover:shadow-md"
                [ngClass]="p === currentPage ? 'bg-blue-600 text-white border-blue-600' : 'bg-white hover:bg-gray-100'">
          {{ p }}
        </button>
      </ng-container>

      <button (click)="changePage(currentPage + 1)"
              [disabled]="currentPage === totalPages"
              class="px-3 py-1 rounded-lg border bg-gray-100 hover:bg-gray-200 disabled:opacity-50">
        Next
      </button>
    </div>
  </div>
</div>